# QuickAR - Plataforma de Realidad Aumentada ğŸš€

Una aplicaciÃ³n fullstack profesional para crear y compartir experiencias de Realidad Aumentada (AR) mediante cÃ³digos QR. Desarrollada con Next.js 15, .NET 9, y tecnologÃ­as AR de Ãºltima generaciÃ³n.

[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-000000?style=flat&logo=next.js&logoColor=white)](https://nextjs.org/)
[![.NET](https://img.shields.io/badge/.NET-512BD4?style=flat&logo=dotnet&logoColor=white)](https://dotnet.microsoft.com/)
[![React Three Fiber](https://img.shields.io/badge/Three.js-000000?style=flat&logo=three.js&logoColor=white)](https://threejs.org/)

## âœ¨ CaracterÃ­sticas Principales

### ğŸ¯ **Sistema AR Dual (MÃ³vil + Desktop)**

#### **Para MÃ³viles (AR Real)**
- âœ… **WebXR** - AR nativo en Chrome para Android
- âœ… **Scene Viewer** - Visor AR de Google (Android)
- âœ… **Quick Look** - AR nativo de Apple (iOS)
- âœ… **BotÃ³n "Ver en AR"** - Activa cÃ¡mara y overlay AR real
- âœ… **model-viewer** - LibrerÃ­a oficial de Google para AR web

#### **Para Desktop (VisualizaciÃ³n 3D)**
- âœ… **React Three Fiber** - Renderizado 3D interactivo de alta calidad
- âœ… **Controles de CÃ¡mara** - Rotar, zoom, y desplazar con mouse
- âœ… **IluminaciÃ³n Realista** - Sombras, reflejos y entorno dinÃ¡mico
- âœ… **Grid Infinito** - NavegaciÃ³n espacial sin lÃ­mites

### ğŸ“± **DetecciÃ³n Inteligente de Dispositivo**
- ğŸ” Detecta automÃ¡ticamente mÃ³vil vs desktop
- ğŸ” Identifica capacidades WebXR
- ğŸ” Reconoce plataforma (iOS/Android)
- ğŸ” Selecciona el mejor visor AR disponible
- ğŸ” Fallback elegante si AR no estÃ¡ disponible

### ğŸ¨ **Tipos de Assets Soportados**

| Tipo | DescripciÃ³n | Formatos | AR Nativo |
|------|-------------|----------|-----------|
| **model3d** | Modelos 3D interactivos | `.glb`, `.gltf` | âœ… SÃ­ |
| **image** | ImÃ¡genes 2D | `.jpg`, `.png`, `.webp` | âš ï¸ VisualizaciÃ³n |
| **video** | Videos con controles | `.mp4`, `.webm` | âš ï¸ VisualizaciÃ³n |
| **message** | Mensajes de texto | Texto plano | âš ï¸ VisualizaciÃ³n |
| **webcontent** | Enlaces externos | URLs | âŒ No |

### ğŸ“Š **GestiÃ³n de Experiencias**

- âœ… **CRUD Completo** - Crear, leer, actualizar, eliminar experiencias
- âœ… **MÃºltiples Assets** - Cada experiencia puede tener varios assets
- âœ… **Slugs Ãšnicos** - URLs amigables para compartir
- âœ… **GeneraciÃ³n de QR** - CÃ³digos QR automÃ¡ticos para cada experiencia
- âœ… **Analytics** - Seguimiento de interacciones de usuarios
- âœ… **Preview en Tiempo Real** - Ve tus experiencias antes de publicar

### ğŸ¨ **Interfaz de Usuario Moderna**

- ğŸ¨ **Glass Morphism** - Efectos de cristal y blur modernos
- ğŸ¨ **Gradientes DinÃ¡micos** - Fondos animados y atractivos
- ğŸ¨ **Responsive Design** - Optimizado para todos los tamaÃ±os de pantalla
- ğŸ¨ **Animaciones Suaves** - Transiciones y feedback visual
- ğŸ¨ **Dark Theme** - DiseÃ±o oscuro profesional

## ğŸ—ï¸ Arquitectura del Proyecto

```
QR-App/
â”œâ”€â”€ QrAr.Api/                          # Backend API (.NET 9)
â”‚   â”œâ”€â”€ Controllers/                   # Endpoints de API
â”‚   â”‚   â”œâ”€â”€ ExperiencesController.cs   # CRUD de experiencias
â”‚   â”‚   â”œâ”€â”€ FilesController.cs         # Upload de archivos
â”‚   â”‚   â”œâ”€â”€ AnalyticsController.cs     # Tracking de eventos
â”‚   â”‚   â””â”€â”€ AuthEndpointGroup.cs       # AutenticaciÃ³n JWT
â”‚   â”œâ”€â”€ Models/                        # Modelos de dominio
â”‚   â”‚   â”œâ”€â”€ Experience.cs              # Experiencia AR
â”‚   â”‚   â”œâ”€â”€ Asset.cs                   # Asset (3D, imagen, etc)
â”‚   â”‚   â”œâ”€â”€ User.cs                    # Usuario del sistema
â”‚   â”‚   â””â”€â”€ AnalyticsEvent.cs          # Evento de analytics
â”‚   â”œâ”€â”€ Services/                      # LÃ³gica de negocio
â”‚   â”‚   â”œâ”€â”€ ExperienceService.cs       # Servicio de experiencias
â”‚   â”‚   â”œâ”€â”€ FileUploadService.cs       # Servicio de uploads
â”‚   â”‚   â”œâ”€â”€ AnalyticsService.cs        # Servicio de analytics
â”‚   â”‚   â””â”€â”€ AuthService.cs             # Servicio de autenticaciÃ³n
â”‚   â”œâ”€â”€ Data/                          # Acceso a datos
â”‚   â”‚   â””â”€â”€ AppDbContext.cs            # Contexto de EF Core
â”‚   â””â”€â”€ wwwroot/uploads/               # Archivos subidos
â”‚
â””â”€â”€ qr-ar-admin/                       # Frontend (Next.js 15)
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ app/                       # App Router de Next.js
    â”‚   â”‚   â”œâ”€â”€ ar/[id]/               # Visor AR unificado
    â”‚   â”‚   â”œâ”€â”€ experiences/           # GestiÃ³n de experiencias
    â”‚   â”‚   â”œâ”€â”€ analytics/             # Dashboard de analytics
    â”‚   â”‚   â””â”€â”€ login/                 # AutenticaciÃ³n
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ ar/                    # Componentes AR
    â”‚   â”‚   â”‚   â”œâ”€â”€ UnifiedARViewer.tsx       # ğŸ†• Viewer unificado
    â”‚   â”‚   â”‚   â”œâ”€â”€ MobileARViewer.tsx        # ğŸ†• AR para mÃ³viles
    â”‚   â”‚   â”‚   â”œâ”€â”€ Desktop3DViewer.tsx       # ğŸ†• 3D para desktop
    â”‚   â”‚   â”‚   â”œâ”€â”€ EnhancedAssetRenderers.tsx # Renderers 3D
    â”‚   â”‚   â”‚   â””â”€â”€ RealisticARViewer.tsx     # Viewer legacy
    â”‚   â”‚   â”œâ”€â”€ ui/                    # Componentes UI
    â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx     # Control de acceso
    â”‚   â”œâ”€â”€ hooks/
    â”‚   â”‚   â””â”€â”€ useARCapabilities.ts   # ğŸ†• DetecciÃ³n de capacidades AR
    â”‚   â”œâ”€â”€ lib/
    â”‚   â”‚   â”œâ”€â”€ api/                   # Clientes de API
    â”‚   â”‚   â”‚   â””â”€â”€ experiences.ts     # API de experiencias
    â”‚   â”‚   â”œâ”€â”€ assetUtils.ts          # ğŸ†• Utilidades de assets
    â”‚   â”‚   â””â”€â”€ helpers/               # Funciones auxiliares
    â”‚   â”œâ”€â”€ types/
    â”‚   â”‚   â”œâ”€â”€ index.ts               # Tipos principales
    â”‚   â”‚   â””â”€â”€ model-viewer.d.ts      # ğŸ†• Tipos de model-viewer
    â”‚   â””â”€â”€ styles/
    â”‚       â”œâ”€â”€ globals.css            # Estilos globales
    â”‚       â””â”€â”€ model-viewer.css       # ğŸ†• Estilos de AR
    â””â”€â”€ public/                        # Archivos estÃ¡ticos
```

## ğŸ”§ TecnologÃ­as Utilizadas

### Backend (.NET 9)

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| **.NET** | 9.0 | Framework principal |
| **Entity Framework Core** | 9.0 | ORM y gestiÃ³n de BD |
| **SQLite** | Latest | Base de datos |
| **Minimal APIs** | - | Endpoints REST ligeros |
| **Swagger/OpenAPI** | - | DocumentaciÃ³n de API |
| **JWT Authentication** | - | AutenticaciÃ³n segura |

### Frontend (Next.js 15)

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| **Next.js** | 15.0 | Framework React |
| **TypeScript** | 5.0+ | Tipado estÃ¡tico |
| **Tailwind CSS** | 3.4 | Estilos utility-first |
| **React Three Fiber** | 8.18 | Renderizado 3D |
| **@react-three/drei** | 9.122 | Helpers para Three.js |
| **Three.js** | 0.164 | Motor 3D |
| **model-viewer** | 3.4+ | AR web de Google |
| **QRCode** | 1.5 | GeneraciÃ³n de QR |
| **Zustand** | 4.5 | State management |
| **Framer Motion** | 11.18 | Animaciones |

## ğŸš€ GuÃ­a de InstalaciÃ³n

### Prerrequisitos

AsegÃºrate de tener instalado:

- âœ… **Node.js** 20.0 o superior
- âœ… **.NET SDK** 9.0
- âœ… **Git** para control de versiones
- âœ… **PowerShell** 7+ (Windows) o Bash (Linux/Mac)

### 1. Clonar el Repositorio

```powershell
git clone https://github.com/JuanPabloTorres/QuickAR.git
cd QuickAR
```

### 2. Configurar Backend (.NET API)

```powershell
# Navegar a la carpeta del API
cd QrAr.Api

# Restaurar dependencias
dotnet restore

# Aplicar migraciones de base de datos
dotnet ef database update

# Ejecutar el servidor (modo desarrollo)
dotnet run

# O usar watch para auto-reload
dotnet watch run
```

El API estarÃ¡ disponible en:
- ğŸŒ HTTP: `http://localhost:5001`
- ğŸ”’ HTTPS: `https://localhost:5002`
- ğŸ“š Swagger: `https://localhost:5002/swagger`

### 3. Configurar Frontend (Next.js)

```powershell
# Navegar a la carpeta del frontend
cd qr-ar-admin

# Instalar dependencias
npm install

# Ejecutar en desarrollo
npm run dev

# O para desarrollo con HTTPS
npm run dev:https
```

El frontend estarÃ¡ disponible en:
- ğŸŒ HTTP: `http://localhost:3001`
- ğŸ”’ HTTPS: `https://localhost:3000` (con dev:https)

### 4. ConfiguraciÃ³n de Variables de Entorno

#### Backend (`QrAr.Api/appsettings.json`)

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=qr_ar.db"
  },
  "Jwt": {
    "Key": "tu-clave-secreta-super-segura-aqui",
    "Issuer": "QuickAR",
    "Audience": "QuickAR-Users"
  },
  "AllowedOrigins": [
    "http://localhost:3001",
    "https://localhost:3000"
  ]
}
```

#### Frontend (`.env.local`)

```env
# API Backend URL
NEXT_PUBLIC_API_BASE_URL=http://localhost:5001

# Para producciÃ³n
# NEXT_PUBLIC_API_BASE_URL=https://tu-api.com
```

## ğŸ“± GuÃ­a de Uso

### Crear una Experiencia AR

1. **Acceder al Panel Admin**
   - Navega a `http://localhost:3001`
   - Inicia sesiÃ³n (o regÃ­strate)

2. **Crear Nueva Experiencia**
   - Click en "Nueva Experiencia"
   - Completa el formulario:
     - **TÃ­tulo**: Nombre descriptivo
     - **Slug**: URL amigable (auto-generado)
     - **DescripciÃ³n**: DescripciÃ³n opcional

3. **Agregar Assets**
   - Click en "Agregar Asset"
   - Selecciona el tipo:
     - ğŸ“¦ **Modelo 3D**: Sube archivo `.glb` o `.gltf`
     - ğŸ–¼ï¸ **Imagen**: Sube `.jpg`, `.png`, `.webp`
     - ğŸ¥ **Video**: Sube `.mp4`, `.webm`
     - ğŸ’¬ **Mensaje**: Escribe texto
     - ğŸŒ **Web Content**: Ingresa URL
   - Completa los campos y guarda

4. **Generar CÃ³digo QR**
   - El sistema genera automÃ¡ticamente un QR
   - Descarga o comparte el enlace

5. **Ver en AR**
   - Escanea el QR con tu mÃ³vil
   - O accede directamente a la URL
   - El sistema detectarÃ¡ automÃ¡ticamente tu dispositivo
   - **MÃ³vil**: VerÃ¡s botÃ³n "Ver en AR" para modelos 3D
   - **Desktop**: VerÃ¡s visualizaciÃ³n 3D interactiva

### Probar AR en Diferentes Dispositivos

#### En Android:
1. Abre Chrome en tu Android
2. Escanea el QR o accede a la URL
3. Para modelos 3D, verÃ¡s el botÃ³n "Ver en AR"
4. Click para activar la cÃ¡mara y ver en tu espacio

#### En iOS:
1. Abre Safari en tu iPhone/iPad
2. Escanea el QR o accede a la URL
3. Para modelos 3D, aparecerÃ¡ el Ã­cono de AR
4. Tap para usar Quick Look AR nativo

#### En Desktop:
1. Abre cualquier navegador moderno
2. Accede a la URL de la experiencia
3. Usa mouse para interactuar:
   - **Click izquierdo + arrastrar**: Rotar
   - **Scroll**: Zoom
   - **Click derecho + arrastrar**: Desplazar
   - **Click en objeto**: Seleccionar

## ğŸ¯ Endpoints de API

### Experiencias

```http
GET    /api/v1/experiences              # Listar todas
GET    /api/v1/experiences/{id}         # Obtener por ID
GET    /api/v1/experiences/slug/{slug}  # Obtener por slug
POST   /api/v1/experiences              # Crear nueva
PUT    /api/v1/experiences/{id}         # Actualizar
DELETE /api/v1/experiences/{id}         # Eliminar
PATCH  /api/v1/experiences/{id}/toggle-active  # Activar/Desactivar
```

### Assets de Archivo

```http
POST   /api/files/upload                # Subir archivo
GET    /uploads/{filename}              # Descargar archivo
```

### Analytics

```http
POST   /api/analytics/track             # Registrar evento
GET    /api/analytics/experience/{id}   # EstadÃ­sticas por experiencia
```

### AutenticaciÃ³n

```http
POST   /api/auth/register               # Registrar usuario
POST   /api/auth/login                  # Iniciar sesiÃ³n
POST   /api/auth/refresh                # Refrescar token
```

## ğŸ¨ Arquitectura AR Explicada

### Flujo de DetecciÃ³n y Renderizado

```
Usuario accede a /ar/[id]
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UnifiedARViewer       â”‚  â† Componente principal
â”‚  - Detecta dispositivo â”‚
â”‚  - Verifica capacidadesâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Â¿MÃ³vil o AR disponible?
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   SÃ        NO
    â”‚         â”‚
    â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mobile  â”‚ â”‚ Desktop      â”‚
â”‚ AR      â”‚ â”‚ 3D Viewer    â”‚
â”‚ Viewer  â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚              â”‚
    â†“              â†“
model-viewer   React Three
WebXR/Scene       Fiber
Viewer/Quick      + drei
Look
```

### Componentes AR Clave

#### 1. **UnifiedARViewer** ğŸ¯
- Punto de entrada principal
- Detecta capacidades del dispositivo
- Rutea al viewer apropiado
- Maneja estados de carga y error

#### 2. **MobileARViewer** ğŸ“±
- Usa `<model-viewer>` de Google
- Soporta WebXR, Scene Viewer, Quick Look
- BotÃ³n "Ver en AR" prominente
- Renderiza todos los tipos de assets

#### 3. **Desktop3DViewer** ğŸ–¥ï¸
- Usa React Three Fiber
- Escena 3D interactiva completa
- Controles de cÃ¡mara orbital
- IluminaciÃ³n y sombras realistas

#### 4. **useARCapabilities** ğŸ”
- Hook personalizado
- Detecta tipo de dispositivo
- Verifica soporte WebXR
- Identifica plataforma (iOS/Android)
- Retorna capacidades disponibles

## ğŸ§ª Testing y QA

### Checklist de Pruebas

#### Desktop
- [ ] VisualizaciÃ³n 3D funciona en Chrome
- [ ] VisualizaciÃ³n 3D funciona en Firefox
- [ ] VisualizaciÃ³n 3D funciona en Safari
- [ ] Controles de cÃ¡mara responsive
- [ ] Assets se cargan correctamente
- [ ] NavegaciÃ³n entre assets fluida

#### Android
- [ ] Chrome: WebXR funciona
- [ ] Chrome: Scene Viewer funciona
- [ ] Firefox: VisualizaciÃ³n funciona
- [ ] BotÃ³n AR visible y funcional
- [ ] CÃ¡mara se activa correctamente

#### iOS
- [ ] Safari: Quick Look funciona
- [ ] Chrome: VisualizaciÃ³n funciona
- [ ] BotÃ³n AR visible
- [ ] Assets se descargan correctamente

### Comandos de Testing

```powershell
# Frontend - Type checking
cd qr-ar-admin
npm run type-check

# Frontend - Linting
npm run lint

# Backend - Unit tests
cd QrAr.Api
dotnet test

# Backend - Build
dotnet build
```

## ğŸ“ˆ Roadmap

### VersiÃ³n 1.1 (Q4 2025)
- [ ] Editor AR en tiempo real
- [ ] Plantillas de experiencias predefinidas
- [ ] ExportaciÃ³n de experiencias
- [ ] ColaboraciÃ³n multi-usuario

### VersiÃ³n 1.2 (Q1 2026)
- [ ] Marketplace de assets 3D
- [ ] Animaciones en modelos 3D
- [ ] Audio espacial
- [ ] GeolocalizaciÃ³n AR

### VersiÃ³n 2.0 (Q2 2026)
- [ ] AR Cloud (persistencia)
- [ ] Multiplayer AR
- [ ] IA generativa de assets
- [ ] WebGPU para mejor rendimiento

## ğŸ› SoluciÃ³n de Problemas

### Error: "AR no disponible"
**Causa**: Dispositivo no soporta AR o conexiÃ³n no segura
**SoluciÃ³n**:
- Verifica que estÃ¡s usando HTTPS o localhost
- AsegÃºrate que el dispositivo soporta WebXR
- En Android, actualiza Chrome a Ãºltima versiÃ³n
- En iOS, usa Safari (no Chrome)

## ğŸ“„ Licencia

MIT License - Consulta el archivo [LICENSE](LICENSE) para mÃ¡s detalles.

## ğŸ¤ Contribuir

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## ğŸ“ Soporte

Si tienes preguntas o necesitas ayuda, por favor abre un issue en el repositorio.
