# 🚀 QuickAR Debug Guide

## Debug Configurations Available

### 🎯 **Recommended: Debug Full Stack (Desktop + Mobile)**
**Press F5 or use this configuration for full development setup**

- ✅ **API Backend** accessible from anywhere (localhost + network)
- ✅ **Frontend** accessible from mobile devices  
- ✅ **Swagger UI** opens automatically
- ✅ **Works for both desktop and mobile testing**

**URLs when running:**
- 💻 **Desktop Frontend:** `http://localhost:3000`
- 📱 **Mobile Frontend:** `http://192.168.0.2:3000`
- 📋 **API Swagger:** `http://localhost:5001/swagger`
- 🌐 **API from Mobile:** `http://192.168.0.2:5001`

### Other Configurations:

#### 💻 Debug Full Stack Desktop HTTP
- For desktop-only development
- Uses HTTP (no SSL certificates needed)

#### 🔒 Debug Full Stack Desktop HTTPS  
- For desktop with HTTPS
- Requires SSL certificates

#### 📱 Debug Mobile Only
- Specific mobile-only configuration
- Network binding for API and Frontend

## 🔧 How to Use

### Method 1: F5 (Quick Start)
1. **Open VS Code** in the project root
2. **Press F5** → This will start the "Debug Full Stack (Desktop + Mobile)" configuration
3. **Wait** for both API and Frontend to start
4. **Swagger opens automatically**
5. **Test on mobile** using `http://192.168.0.2:3000`

### Method 2: Debug Panel
1. **Go to Debug panel** (Ctrl+Shift+D)
2. **Select** "🚀 Debug Full Stack (Desktop + Mobile)"
3. **Press** the green play button
4. **Both services start** simultaneously

## 📱 Testing on Mobile

1. **Ensure** your mobile is on the same WiFi network
2. **Open browser** on your mobile device  
3. **Navigate to:** `http://192.168.0.2:3000`
4. **The app** should load and connect to the API automatically

## 🐛 Troubleshooting

### Can't access from mobile?
```powershell
# Run as Administrator in PowerShell:
New-NetFirewallRule -DisplayName "Next.js Dev" -Direction Inbound -Protocol TCP -LocalPort 3000 -Action Allow
New-NetFirewallRule -DisplayName "ASP.NET API" -Direction Inbound -Protocol TCP -LocalPort 5001 -Action Allow
```

### API not starting?
- Check if port 5001 is free: `netstat -ano | findstr :5001`
- Kill process if needed: `taskkill /PID [PID] /F`

### Frontend not compiling?
```bash
cd qr-ar-admin
npm install
npm run type-check
```

## ⚙️ Configuration Details

The debug setup automatically:
- ✅ **Builds** the API project
- ✅ **Starts** API on `http://0.0.0.0:5001` (network accessible)  
- ✅ **Starts** Frontend on `http://0.0.0.0:3000` (network accessible)
- ✅ **Opens** Swagger documentation
- ✅ **Configures** CORS for cross-origin requests
- ✅ **Sets up** proper environment variables

**You can now develop and test seamlessly on both desktop and mobile! 🎉**

## 🧪 Pruebas y Validación

### Validación de Funcionalidad
1. **Navegador Desktop**: Verifica que `http://localhost:3000` funciona
2. **Navegador Mobile**: Desde tu móvil, accede a `http://192.168.0.2:3000`
3. **API Desktop**: Verifica que `http://localhost:5001/swagger` funciona
4. **API Mobile**: Desde tu móvil, accede a `http://192.168.0.2:5001/swagger`

### Comandos de Verificación
```powershell
# Verificar que los puertos estén abiertos
netstat -an | findstr "3000\|5001\|5002"

# Verificar IP local
ipconfig | findstr "IPv4"

# Probar conectividad desde otro dispositivo
ping 192.168.0.2
```

## 🔧 Solución de Problemas

### Problemas Comunes

#### 🚫 Error "Puerto en Uso"
```powershell
# Ver qué proceso usa el puerto
netstat -ano | findstr ":5001"
# Terminar proceso si es necesario
taskkill /PID <número_proceso> /F
```

#### 🌐 No Acceso desde Mobile
1. Verificar firewall de Windows
2. Comprobar que ambos dispositivos están en la misma red WiFi
3. Verificar IP con `ipconfig`

#### 🔄 Frontend No Carga
- Asegurarse de que Node.js está instalado
- Ejecutar `npm install` en `qr-ar-admin/`
- Verificar variables de entorno

#### 🏗️ API No Compila
- Verificar .NET SDK instalado
- Ejecutar `dotnet restore` en `QrAr.Api/`
- Comprobar base de datos SQLite

### Logs de Debug
- **API Logs**: Se muestran en la consola interna de VS Code
- **Frontend Logs**: Se muestran en el terminal integrado
- **Browser DevTools**: F12 para ver errores del cliente

## 📱 URLs de Acceso Rápido

### Desktop
- Frontend: http://localhost:3000
- API Swagger: http://localhost:5001/swagger
- API HTTPS: https://localhost:5002/swagger

### Mobile (desde cualquier dispositivo en la red)
- Frontend: http://192.168.0.2:3000
- API: http://192.168.0.2:5001/swagger
- Health Check: http://192.168.0.2:5001/health

## 🎯 Tips de Desarrollo

1. **Use F5 para todo**: Una sola tecla inicia todo el stack
2. **Swagger automático**: Se abre automáticamente al iniciar la API
3. **Acceso universal**: El mismo código funciona en desktop y mobile
4. **Debug completo**: Breakpoints funcionan tanto en API como en Frontend
5. **Restart rápido**: Ctrl+Shift+F5 reinicia toda la configuración

---

> 🚀 **¡Listo para desarrollar!** Presiona F5 y comienza a codear con acceso completo desde cualquier dispositivo en tu red.