# 🚀 Guía de Acceso Móvil - QuickAR

## 📱 Instrucciones para Acceder desde tu Teléfono

### 1. **Verifica que estés en la misma red WiFi**
   - Tu PC y tu teléfono deben estar conectados a la **misma red WiFi**
   - Tu IP actual: **192.168.0.2**

### 2. **Servidores en Ejecución**

#### Backend API (ASP.NET Core)
- **URL HTTP**: `http://192.168.0.2:5001`
- **URL HTTPS**: `https://192.168.0.2:5002`
- **Task**: `watch-api` (ya ejecutándose)

#### Frontend (Next.js)
- **URL**: `http://192.168.0.2:3000`
- **Task**: `start-frontend-mobile` (ya ejecutándose)

### 3. **Acceder desde el Teléfono**

#### Opción 1: Navegador del Teléfono
1. Abre el navegador (Chrome, Safari, etc.)
2. Navega a: **`http://192.168.0.2:3000`**
3. Acepta los permisos de cámara cuando se soliciten

#### Opción 2: Escanear Código QR
Puedes generar un QR con esta URL para acceso rápido:
```
http://192.168.0.2:3000
```

### 4. **Verificar Configuración**

#### CORS del Backend
El backend ya está configurado para aceptar solicitudes desde:
- ✅ `http://192.168.0.2:3000`
- ✅ `http://192.168.0.2:3001`
- ✅ `https://192.168.0.2:3000`
- ✅ `https://192.168.0.2:3001`

#### Variables de Entorno del Frontend
El task `start-frontend-mobile` ya configura:
```bash
API_INTERNAL_BASE_URL=http://192.168.0.2:5001
NEXT_PUBLIC_API_BASE_URL=http://192.168.0.2:5001
HOSTNAME=0.0.0.0
PORT=3000
```

### 5. **Probar la Experiencia AR**

1. **Registra/Inicia Sesión**: `http://192.168.0.2:3000/login`
2. **Crea una Experiencia AR**: `http://192.168.0.2:3000/experiences`
3. **Accede a la vista AR**: 
   - Opción A: `http://192.168.0.2:3000/ar/[slug]`
   - Opción B: `http://192.168.0.2:3000/ar/[uuid]`
4. **Otorga permisos de cámara** cuando se solicite
5. **Disfruta del AR** con tu cámara como fondo

### 6. **Características AR en Móvil**

✨ **Controles Táctiles Disponibles**:
- 👆 **Un dedo**: Rotar el objeto
- 👉👈 **Dos dedos**: 
  - Pellizcar/Expandir: Zoom
  - Arrastrar: Pan (mover cámara)
- 🔘 **Botones en pantalla**:
  - `+` / `-`: Zoom
  - `↻`: Rotar 90° en Y

✨ **Tipos de Assets Soportados**:
- 🎨 Modelos 3D (.glb, .gltf)
- 🖼️ Imágenes (.jpg, .png, .gif)
- 🎬 Videos (.mp4, .webm)
- 💬 Mensajes de texto (tarjeta azul con gradiente)

### 7. **Troubleshooting**

#### ❌ No se conecta
- Verifica que ambos dispositivos estén en la misma red WiFi
- Comprueba tu firewall de Windows (debe permitir puerto 3000 y 5001)
- Ejecuta: `ipconfig` para verificar tu IP actual

#### ❌ Error de cámara
- Asegúrate de usar **HTTP** (no HTTPS) desde IP
- Otorga permisos de cámara en el navegador
- Si usa HTTPS, necesitarás certificados válidos

#### ❌ CORS Error
- Verifica que `192.168.0.2` esté en la lista CORS del backend
- Reinicia el servidor API si cambiaste la configuración

#### ❌ Assets no cargan
- Verifica que la API esté respondiendo: `http://192.168.0.2:5001/api/health`
- Los archivos deben estar en: `QrAr.Api/wwwroot/uploads/`

### 8. **Comandos Útiles**

#### Ver tu IP actual
```powershell
ipconfig | Select-String -Pattern "IPv4"
```

#### Detener servidores
- Presiona `Ctrl+C` en cada terminal

#### Reiniciar servidores
```powershell
# Backend
dotnet watch run --project QrAr.Api/QrAr.Api.csproj

# Frontend
cd qr-ar-admin
npm run dev:mobile
```

### 9. **Configuración Avanzada**

#### Si tu IP cambia
1. Obtén la nueva IP: `ipconfig`
2. Actualiza `CORS` en `Program.cs` (líneas 52-68)
3. Actualiza el task `start-frontend-mobile` en `.vscode/tasks.json`
4. Reinicia ambos servidores

#### Para HTTPS en móvil
Necesitarás:
1. Certificados SSL válidos para la IP local
2. Instalar el certificado CA en el teléfono
3. Usar el task `start-frontend` con HTTPS

---

## 📝 Notas Importantes

- 🔒 **Seguridad**: Esta configuración es solo para desarrollo local
- 🌐 **Red**: Asegúrate de estar en una red confiable
- 📷 **Cámara**: HTTP funciona mejor para permisos de cámara en desarrollo
- 🔄 **Hot Reload**: Los cambios en el código se reflejarán automáticamente

---

## 🎯 Acceso Rápido

**Frontend Móvil**: http://192.168.0.2:3000
**API Backend**: http://192.168.0.2:5001
**API Health Check**: http://192.168.0.2:5001/api/health

---

¡Disfruta de tu experiencia AR! 🚀✨
