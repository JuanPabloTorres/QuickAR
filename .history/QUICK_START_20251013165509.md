# 🚀 Inicio Rápido - QuickAR

## Para correr en tu computadora Y teléfono al mismo tiempo

### Opción 1: Script Automático (Recomendado) ⭐

Ejecuta este comando en PowerShell desde la raíz del proyecto:

```powershell
.\start-all.ps1
```

Este script:
- ✅ Detecta automáticamente tu IP local
- ✅ Inicia el Backend API en `http://0.0.0.0:5001`
- ✅ Inicia el Frontend en `http://0.0.0.0:3000`
- ✅ Te muestra las URLs para acceder desde tu PC y teléfono
- ✅ Monitorea ambos servidores y muestra sus logs

**Detener los servidores:** Presiona `Ctrl+C`

---

### Opción 2: Usar Tasks de VS Code

1. Presiona `Ctrl+Shift+B` (o `Cmd+Shift+B` en Mac)
2. Selecciona: **`start-all-network`**

Esto iniciará ambos servidores automáticamente.

---

### Opción 3: Manual

#### Terminal 1 - Backend API:
```powershell
cd QrAr.Api
$env:ASPNETCORE_URLS="http://0.0.0.0:5001;https://0.0.0.0:5002"
dotnet watch run
```

#### Terminal 2 - Frontend:
```powershell
cd qr-ar-admin
npm run dev:mobile
```

---

## 📱 Acceder desde tu Teléfono

### Requisitos:
1. Tu PC y teléfono deben estar en la **misma red WiFi**
2. El firewall debe permitir las conexiones (Windows Defender te preguntará)

### Pasos:

1. **Ejecuta el sistema** (cualquiera de las opciones de arriba)

2. **Obtén tu IP local** (el script la muestra automáticamente, pero si necesitas verificarla):
   ```powershell
   ipconfig | Select-String -Pattern "IPv4"
   ```
   Busca la que empiece con `192.168.x.x`

3. **Abre en tu teléfono**:
   - Navegador: `http://192.168.0.2:3000` (reemplaza con tu IP)
   - O escanea un QR con esta URL

4. **Otorga permisos de cámara** cuando el navegador lo solicite

5. **¡Disfruta del AR!** 🎉

---

## 🎯 URLs de Acceso

Reemplaza `192.168.0.2` con tu IP local:

| Servicio | Computadora | Teléfono |
|----------|-------------|----------|
| **Frontend** | http://localhost:3000<br>http://192.168.0.2:3000 | http://192.168.0.2:3000 |
| **API** | http://localhost:5001<br>http://192.168.0.2:5001 | http://192.168.0.2:5001 |
| **Health Check** | http://localhost:5001/health | http://192.168.0.2:5001/health |

---

## ✨ Características Disponibles

### En Computadora:
- 🖱️ **Ratón**: Click y arrastrar para rotar, scroll para zoom
- ⌨️ **Teclado**: Controles adicionales
- 🎨 **Pantalla grande**: Mejor experiencia de edición

### En Teléfono:
- 📷 **Cámara AR**: Vista con la cámara como fondo (AR real)
- 👆 **Touch**: 
  - 1 dedo = Rotar
  - 2 dedos = Zoom y Pan
- 🔘 **Botones**: +/- para zoom, ↻ para rotar 90°

### Tipos de Assets:
- 🎨 Modelos 3D (.glb, .gltf)
- 🖼️ Imágenes (.jpg, .png, .gif)
- 🎬 Videos (.mp4, .webm)
- 💬 Mensajes de texto (diseño de tarjeta azul)

---

## 🔧 Troubleshooting

### ❌ "No puedo conectarme desde el teléfono"

**Solución:**
1. Verifica que estés en la misma red WiFi
2. Verifica tu IP: `ipconfig`
3. Permite las conexiones en el Firewall de Windows:
   ```powershell
   # Ejecutar como Administrador
   New-NetFirewallRule -DisplayName "QuickAR Backend" -Direction Inbound -LocalPort 5001 -Protocol TCP -Action Allow
   New-NetFirewallRule -DisplayName "QuickAR Frontend" -Direction Inbound -LocalPort 3000 -Protocol TCP -Action Allow
   ```

### ❌ "Error de cámara en el teléfono"

**Solución:**
- Asegúrate de usar **HTTP** (no HTTPS) cuando accedas por IP
- Otorga permisos de cámara en la configuración del navegador
- Prueba con Chrome o Safari (tienen mejor soporte)

### ❌ "CORS Error"

**Solución:**
- El sistema ahora acepta cualquier IP local automáticamente
- Si persiste, reinicia ambos servidores

### ❌ "Los assets no cargan"

**Solución:**
1. Verifica que la API esté corriendo: `http://TU_IP:5001/health`
2. Los archivos deben estar en: `QrAr.Api/wwwroot/uploads/`
3. Revisa los permisos de la carpeta uploads

---

## 📝 Configuración Avanzada

### Cambiar Puertos

Edita las variables de entorno en `.vscode/tasks.json` o en los scripts:

- **API**: Modifica `ASPNETCORE_URLS`
- **Frontend**: Modifica `PORT` en las variables de entorno

### Para Producción

```powershell
# Backend
cd QrAr.Api
dotnet publish -c Release
cd bin/Release/net9.0/publish
dotnet QrAr.Api.dll

# Frontend
cd qr-ar-admin
npm run build
npm run start
```

---

## 🔒 Nota de Seguridad

Esta configuración es **solo para desarrollo local**. Para producción:
- ✅ Usa HTTPS con certificados válidos
- ✅ Configura CORS específicamente
- ✅ Implementa autenticación robusta
- ✅ Usa variables de entorno seguras

---

## 📚 Documentación Completa

Para más detalles, consulta:
- [`MOBILE_ACCESS.md`](./MOBILE_ACCESS.md) - Guía detallada de acceso móvil
- [`README.md`](./README.md) - Documentación completa del proyecto

---

## 🎉 ¡Listo!

Ahora puedes desarrollar y probar tu aplicación AR simultáneamente en tu computadora y teléfono.

**Comandos rápidos:**
```powershell
# Iniciar todo
.\start-all.ps1

# Ver tu IP
ipconfig | Select-String "IPv4"

# Detener todo
Ctrl+C
```

---

**¿Problemas?** Revisa la sección de Troubleshooting o abre un issue en GitHub.
